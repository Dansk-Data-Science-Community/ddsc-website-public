{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% translate "Dashboard" %}{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static "css/button.css" %}">
<link rel="stylesheet" href="{% static "css/links.css" %}">
<link rel="stylesheet" href="{% static "events/events.css" %}">

<div id="content" class="container mb-5 mt-3 pb-2">
  <center class="container">
    <h1 class="title py-3">{% translate "Min profil" %}</h1>
  <center>
</div>

<div class="container">
    <div class="row align-items-start">
        <div class="col-md-6 mb-5">
            <div class="card border border-secondary">
            <div class="card-header pb-0 bg-dark">
                <h5 class="card-title text-white">{{user.get_full_name}}</h5>
            </div>
                <div class="card-body bg-light">
                    <div class="row align-items-center">
                        <div class="col">
                            <div class="short-div"><strong>{% translate "Email" %}</strong></div>
                            <div class="short-div"><strong>{% translate "FÃ¸dselsdato" %}</strong></div>
                        </div>
                        <div class="col">
                            <div class="short-div">{{user.email|default_if_none:""}}</div>
                            <div class="short-div">{{user.profile.birthdate|default_if_none:""}}</div>
                        </div>
                        <div class="col">
                            <a class="btn button-color text-white-50 float-right" href="{% url "users:edit" %}">{% translate "Rediger" %}</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 mb-5">
            <div class="card border border-secondary">
            <div class="card-header pb-0 bg-dark">
                <h5 class="card-title text-white text-center">{% translate "Tilmeldte events" %}</h5>
            </div>
                <div class="card-body bg-light">
                    <div class="list-group">
                        {% for registration in registrations %}
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-center">
                                <a href="#" class="list-group-item list-group-item-action" data-toggle="modal" data-target=".{{ registration.slug }}">
                                    <i class="fas fa-heading"></i> {{ registration.event.title }} - <i class="far fa-calendar-alt"></i> {{ registration.event.start_datetime | date:'d-m-Y' }} - <i class="fas fa-map-marker-alt"></i> {{ registration.event.location }}
                                </a>
                                <a class="btn button-color text-white-50 ml-md-2" href="{% url 'events:unregister' slug=registration.slug id=registration.id %}">
                                    {% translate 'Afmeld' %}
                                </a>
                                {% include 'events/event_ticket.html' with registration=registration %}
                            </div>
                        {% endfor %}
                    </div>                    
                </div>
            </div>
        </div>
        {% if user.is_member %}
        <div class="col-md-6 mb-5">
            <div class="card border border-secondary">
            <div class="card-header pb-0 bg-dark">
                <h5 class="card-title text-white text-center">{% translate "Medlemsskab" %}</h5>
            </div>
                <div class="card-body bg-light">
                    <div class="row">
                        <div class="col"><strong>{% translate "Medlemsstatus" %}</strong></div>
                        <div class="col float-right">{{user.member.get_status_display }}</div>
                    </div>
                    <div class="row">
                        <div class="col"><strong>{% translate "Medlemstitel" %}</strong></div>
                        <div class="col float-right">{{user.member.get_title_display }}</div>
                    </div>
                    <a class="btn button-color text-white-50 mt-3 float-right" href="{% url "members:edit"%}">{% translate "Rediger" %}</a>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
<div id="content" class="container mb-5 mt-3 pb-2">
</div>
{% endblock %}